###Linking ICD10 codes of interest to ICD10 dates###
#The input will be used to perform the observational and one-sample MR analyses restricted on ICD10 cases of interest that have occurred after the platelet measurements to minimise reverse causation.

##Prepare ICD10 codes of interest 
#Read in relevant packages
library(data.table)
library(plyr)
library(dplyr)

#Read in relevant data
dat <- fread("IEU_output_extracted_plateletphenotypes_SD_41270_ICD10_41280_ICD10dates.tsv", header = T, sep = " ", na.strings = c("","NA"))

#Format date columns to r dates 
dat$f.41280.0.0 <- as.Date(dat$f.41280.0.0)
dat$f.41280.0.1 <- as.Date(dat$f.41280.0.1)
dat$f.41280.0.2 <- as.Date(dat$f.41280.0.2)
dat$f.41280.0.3 <- as.Date(dat$f.41280.0.3)
dat$f.41280.0.4 <- as.Date(dat$f.41280.0.4)
dat$f.41280.0.5 <- as.Date(dat$f.41280.0.5)
dat$f.41280.0.6 <- as.Date(dat$f.41280.0.6)
dat$f.41280.0.7 <- as.Date(dat$f.41280.0.7)
dat$f.41280.0.8 <- as.Date(dat$f.41280.0.8)
dat$f.41280.0.9 <- as.Date(dat$f.41280.0.9)
dat$f.41280.0.10 <- as.Date(dat$f.41280.0.10)
dat$f.41280.0.11 <- as.Date(dat$f.41280.0.11)
dat$f.41280.0.12 <- as.Date(dat$f.41280.0.12)
dat$f.41280.0.13 <- as.Date(dat$f.41280.0.13)
dat$f.41280.0.14 <- as.Date(dat$f.41280.0.14)
dat$f.41280.0.15 <- as.Date(dat$f.41280.0.15)
dat$f.41280.0.16 <- as.Date(dat$f.41280.0.16)
dat$f.41280.0.17 <- as.Date(dat$f.41280.0.17)
dat$f.41280.0.18 <- as.Date(dat$f.41280.0.18)
dat$f.41280.0.19 <- as.Date(dat$f.41280.0.19)
dat$f.41280.0.20 <- as.Date(dat$f.41280.0.20)
dat$f.41280.0.21 <- as.Date(dat$f.41280.0.21)
dat$f.41280.0.22 <- as.Date(dat$f.41280.0.22)
dat$f.41280.0.23 <- as.Date(dat$f.41280.0.23)
dat$f.41280.0.24 <- as.Date(dat$f.41280.0.24)
dat$f.41280.0.25 <- as.Date(dat$f.41280.0.25)
dat$f.41280.0.26 <- as.Date(dat$f.41280.0.26)
dat$f.41280.0.27 <- as.Date(dat$f.41280.0.27)
dat$f.41280.0.28 <- as.Date(dat$f.41280.0.28)
dat$f.41280.0.29 <- as.Date(dat$f.41280.0.29)
dat$f.41280.0.30 <- as.Date(dat$f.41280.0.30)
dat$f.41280.0.31 <- as.Date(dat$f.41280.0.31)
dat$f.41280.0.32 <- as.Date(dat$f.41280.0.32)
dat$f.41280.0.33 <- as.Date(dat$f.41280.0.33)
dat$f.41280.0.34 <- as.Date(dat$f.41280.0.34)
dat$f.41280.0.35 <- as.Date(dat$f.41280.0.35)
dat$f.41280.0.36 <- as.Date(dat$f.41280.0.36)
dat$f.41280.0.37 <- as.Date(dat$f.41280.0.37)
dat$f.41280.0.38 <- as.Date(dat$f.41280.0.38)
dat$f.41280.0.39 <- as.Date(dat$f.41280.0.39)
dat$f.41280.0.40 <- as.Date(dat$f.41280.0.40)
dat$f.41280.0.41 <- as.Date(dat$f.41280.0.41)
dat$f.41280.0.42 <- as.Date(dat$f.41280.0.42)
dat$f.41280.0.43 <- as.Date(dat$f.41280.0.43)
dat$f.41280.0.44 <- as.Date(dat$f.41280.0.44)
dat$f.41280.0.45 <- as.Date(dat$f.41280.0.45)
dat$f.41280.0.46 <- as.Date(dat$f.41280.0.46)
dat$f.41280.0.47 <- as.Date(dat$f.41280.0.47)
dat$f.41280.0.48 <- as.Date(dat$f.41280.0.48)
dat$f.41280.0.49 <- as.Date(dat$f.41280.0.49)
dat$f.41280.0.50 <- as.Date(dat$f.41280.0.50)
dat$f.41280.0.51 <- as.Date(dat$f.41280.0.51)
dat$f.41280.0.52 <- as.Date(dat$f.41280.0.52)
dat$f.41280.0.53 <- as.Date(dat$f.41280.0.53)
dat$f.41280.0.54 <- as.Date(dat$f.41280.0.54)
dat$f.41280.0.55 <- as.Date(dat$f.41280.0.55)
dat$f.41280.0.56 <- as.Date(dat$f.41280.0.56)
dat$f.41280.0.57 <- as.Date(dat$f.41280.0.57)
dat$f.41280.0.58 <- as.Date(dat$f.41280.0.58)
dat$f.41280.0.59 <- as.Date(dat$f.41280.0.59)
dat$f.41280.0.60 <- as.Date(dat$f.41280.0.60)
dat$f.41280.0.61 <- as.Date(dat$f.41280.0.61)
dat$f.41280.0.62 <- as.Date(dat$f.41280.0.62)
dat$f.41280.0.63 <- as.Date(dat$f.41280.0.63)
dat$f.41280.0.64 <- as.Date(dat$f.41280.0.64)
dat$f.41280.0.65 <- as.Date(dat$f.41280.0.65)
dat$f.41280.0.66 <- as.Date(dat$f.41280.0.66)
dat$f.41280.0.67 <- as.Date(dat$f.41280.0.67)
dat$f.41280.0.68 <- as.Date(dat$f.41280.0.68)
dat$f.41280.0.69 <- as.Date(dat$f.41280.0.69)
dat$f.41280.0.70 <- as.Date(dat$f.41280.0.70)
dat$f.41280.0.71 <- as.Date(dat$f.41280.0.71)
dat$f.41280.0.72 <- as.Date(dat$f.41280.0.72)
dat$f.41280.0.73 <- as.Date(dat$f.41280.0.73)
dat$f.41280.0.74 <- as.Date(dat$f.41280.0.74)
dat$f.41280.0.75 <- as.Date(dat$f.41280.0.75)
dat$f.41280.0.76 <- as.Date(dat$f.41280.0.76)
dat$f.41280.0.77 <- as.Date(dat$f.41280.0.77)
dat$f.41280.0.78 <- as.Date(dat$f.41280.0.78)
dat$f.41280.0.79 <- as.Date(dat$f.41280.0.79)
dat$f.41280.0.80 <- as.Date(dat$f.41280.0.80)
dat$f.41280.0.81 <- as.Date(dat$f.41280.0.81)
dat$f.41280.0.82 <- as.Date(dat$f.41280.0.82)
dat$f.41280.0.83 <- as.Date(dat$f.41280.0.83)
dat$f.41280.0.84 <- as.Date(dat$f.41280.0.84)
dat$f.41280.0.85 <- as.Date(dat$f.41280.0.85)
dat$f.41280.0.86 <- as.Date(dat$f.41280.0.86)
dat$f.41280.0.87 <- as.Date(dat$f.41280.0.87)
dat$f.41280.0.88 <- as.Date(dat$f.41280.0.88)
dat$f.41280.0.89 <- as.Date(dat$f.41280.0.89)
dat$f.41280.0.90 <- as.Date(dat$f.41280.0.90)
dat$f.41280.0.91 <- as.Date(dat$f.41280.0.91)
dat$f.41280.0.92 <- as.Date(dat$f.41280.0.92)
dat$f.41280.0.93 <- as.Date(dat$f.41280.0.93)
dat$f.41280.0.94 <- as.Date(dat$f.41280.0.94)
dat$f.41280.0.95 <- as.Date(dat$f.41280.0.95)
dat$f.41280.0.96 <- as.Date(dat$f.41280.0.96)
dat$f.41280.0.97 <- as.Date(dat$f.41280.0.97)
dat$f.41280.0.98 <- as.Date(dat$f.41280.0.98)
dat$f.41280.0.99 <- as.Date(dat$f.41280.0.99)
dat$f.41280.0.100 <- as.Date(dat$f.41280.0.100)
dat$f.41280.0.101 <- as.Date(dat$f.41280.0.101)
dat$f.41280.0.102 <- as.Date(dat$f.41280.0.102)
dat$f.41280.0.103 <- as.Date(dat$f.41280.0.103)
dat$f.41280.0.104 <- as.Date(dat$f.41280.0.104)
dat$f.41280.0.105 <- as.Date(dat$f.41280.0.105)
dat$f.41280.0.106 <- as.Date(dat$f.41280.0.106)
dat$f.41280.0.107 <- as.Date(dat$f.41280.0.107)
dat$f.41280.0.108 <- as.Date(dat$f.41280.0.108)
dat$f.41280.0.109 <- as.Date(dat$f.41280.0.109)
dat$f.41280.0.110 <- as.Date(dat$f.41280.0.110)
dat$f.41280.0.111 <- as.Date(dat$f.41280.0.111)
dat$f.41280.0.112 <- as.Date(dat$f.41280.0.112)
dat$f.41280.0.113 <- as.Date(dat$f.41280.0.113)
dat$f.41280.0.114 <- as.Date(dat$f.41280.0.114)
dat$f.41280.0.115 <- as.Date(dat$f.41280.0.115)
dat$f.41280.0.116 <- as.Date(dat$f.41280.0.116)
dat$f.41280.0.117 <- as.Date(dat$f.41280.0.117)
dat$f.41280.0.118 <- as.Date(dat$f.41280.0.118)
dat$f.41280.0.119 <- as.Date(dat$f.41280.0.119)
dat$f.41280.0.120 <- as.Date(dat$f.41280.0.120)
dat$f.41280.0.121 <- as.Date(dat$f.41280.0.121)
dat$f.41280.0.122 <- as.Date(dat$f.41280.0.122)
dat$f.41280.0.123 <- as.Date(dat$f.41280.0.123)
dat$f.41280.0.124 <- as.Date(dat$f.41280.0.124)
dat$f.41280.0.125 <- as.Date(dat$f.41280.0.125)
dat$f.41280.0.126 <- as.Date(dat$f.41280.0.126)
dat$f.41280.0.127 <- as.Date(dat$f.41280.0.127)
dat$f.41280.0.128 <- as.Date(dat$f.41280.0.128)
dat$f.41280.0.129 <- as.Date(dat$f.41280.0.129)
dat$f.41280.0.130 <- as.Date(dat$f.41280.0.130)
dat$f.41280.0.131 <- as.Date(dat$f.41280.0.131)
dat$f.41280.0.132 <- as.Date(dat$f.41280.0.132)
dat$f.41280.0.133 <- as.Date(dat$f.41280.0.133)
dat$f.41280.0.134 <- as.Date(dat$f.41280.0.134)
dat$f.41280.0.135 <- as.Date(dat$f.41280.0.135)
dat$f.41280.0.136 <- as.Date(dat$f.41280.0.136)
dat$f.41280.0.137 <- as.Date(dat$f.41280.0.137)
dat$f.41280.0.138 <- as.Date(dat$f.41280.0.138)
dat$f.41280.0.139 <- as.Date(dat$f.41280.0.139)
dat$f.41280.0.140 <- as.Date(dat$f.41280.0.140)
dat$f.41280.0.141 <- as.Date(dat$f.41280.0.141)
dat$f.41280.0.142 <- as.Date(dat$f.41280.0.142)
dat$f.41280.0.143 <- as.Date(dat$f.41280.0.143)
dat$f.41280.0.144 <- as.Date(dat$f.41280.0.144)
dat$f.41280.0.145 <- as.Date(dat$f.41280.0.145)
dat$f.41280.0.146 <- as.Date(dat$f.41280.0.146)
dat$f.41280.0.147 <- as.Date(dat$f.41280.0.147)
dat$f.41280.0.148 <- as.Date(dat$f.41280.0.148)
dat$f.41280.0.149 <- as.Date(dat$f.41280.0.149)
dat$f.41280.0.150 <- as.Date(dat$f.41280.0.150)
dat$f.41280.0.151 <- as.Date(dat$f.41280.0.151)
dat$f.41280.0.152 <- as.Date(dat$f.41280.0.152)
dat$f.41280.0.153 <- as.Date(dat$f.41280.0.153)
dat$f.41280.0.154 <- as.Date(dat$f.41280.0.154)
dat$f.41280.0.155 <- as.Date(dat$f.41280.0.155)
dat$f.41280.0.156 <- as.Date(dat$f.41280.0.156)
dat$f.41280.0.157 <- as.Date(dat$f.41280.0.157)
dat$f.41280.0.158 <- as.Date(dat$f.41280.0.158)
dat$f.41280.0.159 <- as.Date(dat$f.41280.0.159)
dat$f.41280.0.160 <- as.Date(dat$f.41280.0.160)
dat$f.41280.0.161 <- as.Date(dat$f.41280.0.161)
dat$f.41280.0.162 <- as.Date(dat$f.41280.0.162)
dat$f.41280.0.163 <- as.Date(dat$f.41280.0.163)
dat$f.41280.0.164 <- as.Date(dat$f.41280.0.164)
dat$f.41280.0.165 <- as.Date(dat$f.41280.0.165)
dat$f.41280.0.166 <- as.Date(dat$f.41280.0.166)
dat$f.41280.0.167 <- as.Date(dat$f.41280.0.167)
dat$f.41280.0.168 <- as.Date(dat$f.41280.0.168)
dat$f.41280.0.169 <- as.Date(dat$f.41280.0.169)
dat$f.41280.0.170 <- as.Date(dat$f.41280.0.170)
dat$f.41280.0.171 <- as.Date(dat$f.41280.0.171)
dat$f.41280.0.172 <- as.Date(dat$f.41280.0.172)
dat$f.41280.0.173 <- as.Date(dat$f.41280.0.173)
dat$f.41280.0.174 <- as.Date(dat$f.41280.0.174)
dat$f.41280.0.175 <- as.Date(dat$f.41280.0.175)
dat$f.41280.0.176 <- as.Date(dat$f.41280.0.176)
dat$f.41280.0.177 <- as.Date(dat$f.41280.0.177)
dat$f.41280.0.178 <- as.Date(dat$f.41280.0.178)
dat$f.41280.0.179 <- as.Date(dat$f.41280.0.179)
dat$f.41280.0.180 <- as.Date(dat$f.41280.0.180)
dat$f.41280.0.181 <- as.Date(dat$f.41280.0.181)
dat$f.41280.0.182 <- as.Date(dat$f.41280.0.182)
dat$f.41280.0.183 <- as.Date(dat$f.41280.0.183)
dat$f.41280.0.184 <- as.Date(dat$f.41280.0.184)
dat$f.41280.0.185 <- as.Date(dat$f.41280.0.185)
dat$f.41280.0.186 <- as.Date(dat$f.41280.0.186)
dat$f.41280.0.187 <- as.Date(dat$f.41280.0.187)
dat$f.41280.0.188 <- as.Date(dat$f.41280.0.188)
dat$f.41280.0.189 <- as.Date(dat$f.41280.0.189)
dat$f.41280.0.190 <- as.Date(dat$f.41280.0.190)
dat$f.41280.0.191 <- as.Date(dat$f.41280.0.191)
dat$f.41280.0.192 <- as.Date(dat$f.41280.0.192)
dat$f.41280.0.193 <- as.Date(dat$f.41280.0.193)
dat$f.41280.0.194 <- as.Date(dat$f.41280.0.194)
dat$f.41280.0.195 <- as.Date(dat$f.41280.0.195)
dat$f.41280.0.196 <- as.Date(dat$f.41280.0.196)
dat$f.41280.0.197 <- as.Date(dat$f.41280.0.197)
dat$f.41280.0.198 <- as.Date(dat$f.41280.0.198)
dat$f.41280.0.199 <- as.Date(dat$f.41280.0.199)
dat$f.41280.0.200 <- as.Date(dat$f.41280.0.200)
dat$f.41280.0.201 <- as.Date(dat$f.41280.0.201)
dat$f.41280.0.202 <- as.Date(dat$f.41280.0.202)
dat$f.41280.0.203 <- as.Date(dat$f.41280.0.203)
dat$f.41280.0.204 <- as.Date(dat$f.41280.0.204)
dat$f.41280.0.205 <- as.Date(dat$f.41280.0.205)
dat$f.41280.0.206 <- as.Date(dat$f.41280.0.206)
dat$f.41280.0.207 <- as.Date(dat$f.41280.0.207)
dat$f.41280.0.208 <- as.Date(dat$f.41280.0.208)
dat$f.41280.0.209 <- as.Date(dat$f.41280.0.209)
dat$f.41280.0.210 <- as.Date(dat$f.41280.0.210)
dat$f.41280.0.211 <- as.Date(dat$f.41280.0.211)
dat$f.41280.0.212 <- as.Date(dat$f.41280.0.212)
dat$f.41280.0.213 <- as.Date(dat$f.41280.0.213)
dat$f.41280.0.214 <- as.Date(dat$f.41280.0.214)
dat$f.41280.0.215 <- as.Date(dat$f.41280.0.215)
dat$f.41280.0.216 <- as.Date(dat$f.41280.0.216)
dat$f.41280.0.217 <- as.Date(dat$f.41280.0.217)
dat$f.41280.0.218 <- as.Date(dat$f.41280.0.218)
dat$f.41280.0.219 <- as.Date(dat$f.41280.0.219)
dat$f.41280.0.220 <- as.Date(dat$f.41280.0.220)
dat$f.41280.0.221 <- as.Date(dat$f.41280.0.221)
dat$f.41280.0.222 <- as.Date(dat$f.41280.0.222)
dat$f.41280.0.223 <- as.Date(dat$f.41280.0.223)
dat$f.41280.0.224 <- as.Date(dat$f.41280.0.224)
dat$f.41280.0.225 <- as.Date(dat$f.41280.0.225)

#Load function
source("UKBexpFunc.R")

#All ICD10 data
allICD10 <- unlist(dat %>% select(starts_with("f.41270.")), use.names=F) #this searches your columns for all unique values and lists them
allICD10<-allICD10[!is.na(allICD10)] # removes NA
allICD10<-allICD10[!duplicated(allICD10)] # removes duplicate ICD10 codes

#Subset for only ICD10 codes of interest 
toMatch <- c("I210", "I211", "I212", "I213", "I214", "I219") #ICD10 codes for acute MI
#OR
toMatch <- c("I801", "I802") #ICD10 codes for DVT
#OR
toMatch <- c("I260", "I269") #ICD10 codes for PE
thrombotic_events_ICD10 <- unique(grep(paste(toMatch,collapse="|"), allICD10, value=TRUE))
table(thrombotic_events_ICD10) #Check the codes of interest that were matched

#Run function 
res_ICD10cases <- UKBexpFunc(dat= dat, exposureCode = thrombotic_events_ICD10, sitename = "thrombotic.events.ICD10", other=F, exp_col = "f.41270.")
res_ICD10controls <- UKBexpFunc(dat= dat, exposureCode = thrombotic_events_ICD10, sitename = "otherICD10", other=TRUE)
res <- full_join(res_ICD10cases, res_ICD10controls)

# How many diagnosis of ICD10 vars?
ICD10_cases <- res %>% dplyr:: select(starts_with("thrombotic"))
str(df, list.len=ncol(ICD10_cases)) 
ICD10_other <- res %>% dplyr:: select(starts_with("other"))
str(df, list.len=ncol(ICD10_other)) 

ICD10_res_plt <- res %>% select("projectID", "ieu", "PLT_initial_SD", "PLT_dates_initial", starts_with("thrombotic.events.ICD10"), starts_with("other")) #To match PLT with ICD10 cases
#OR
ICD10_res_mpv <- res %>% select("projectID", "ieu", "MPV_initial_SD", "MPVdates_initial", starts_with("thrombotic.events.ICD10"), starts_with("other")) # To make MPV to ICD10 

#Format results 
# 1. split the ICD10 diagnoses: #ICD_code/date_of_diagnosis
# 2. format columns
# 3. generate incidence of ICD10 flag
# 4. define controls
# 5. define incident cases
# 6. tidy up data

library(tidyr); library(dplyr)

df <- ICD10_res_plt 
rm(ICD10_res_plt)
#OR
df <- ICD10_res_mpv 
rm(ICD10_res_mpv)
df <- as.data.frame(df) 

#Perform step 1 
df2<-separate(df,thrombotic.events.ICD101,into=c("thrombotic.events.ICD10.1","thrombotic.events.ICD10.date.diagnosis.1"),sep="/")
df3<-separate(df2,thrombotic.events.ICD102,into=c("thrombotic.events.ICD10.2","thrombotic.events.ICD10.date.diagnosis.2"),sep="/")
df4<-separate(df3,thrombotic.events.ICD103,into=c("thrombotic.events.ICD10.3","thrombotic.events.ICD10.date.diagnosis.3"),sep="/")
df5<-separate(df4,thrombotic.events.ICD104,into=c("thrombotic.events.ICD10.4","thrombotic.events.ICD10.date.diagnosis.4"),sep="/")
df6<-separate(df5,thrombotic.events.ICD105,into=c("thrombotic.events.ICD10.5","thrombotic.events.ICD10.date.diagnosis.5"),sep="/")
df7<-separate(df6,thrombotic.events.ICD106,into=c("thrombotic.events.ICD10.6","thrombotic.events.ICD10.date.diagnosis.6"),sep="/")
df8<-separate(df7,thrombotic.events.ICD107,into=c("thrombotic.events.ICD10.7","thrombotic.events.ICD10.date.diagnosis.7"),sep="/")
df9<-separate(df8,thrombotic.events.ICD108,into=c("thrombotic.events.ICD10.8","thrombotic.events.ICD10.date.diagnosis.8"),sep="/")
df10<-separate(df9,thrombotic.events.ICD109,into=c("thrombotic.events.ICD10.9","thrombotic.events.ICD10.date.diagnosis.9"),sep="/")
df11<-separate(df10,thrombotic.events.ICD1010,into=c("thrombotic.events.ICD10.10","thrombotic.events.ICD10.date.diagnosis.10"),sep="/")
df12<-separate(df11,thrombotic.events.ICD1011,into=c("thrombotic.events.ICD10.11","thrombotic.events.ICD10.date.diagnosis.11"),sep="/")
df13<-separate(df12,thrombotic.events.ICD1012,into=c("thrombotic.events.ICD10.12","thrombotic.events.ICD10.date.diagnosis.12"),sep="/")
df14<-separate(df13,thrombotic.events.ICD1013,into=c("thrombotic.events.ICD10.13","thrombotic.events.ICD10.date.diagnosis.13"),sep="/")
df15<-separate(df14,thrombotic.events.ICD1014,into=c("thrombotic.events.ICD10.14","thrombotic.events.ICD10.date.diagnosis.14"),sep="/")
df16<-separate(df15,thrombotic.events.ICD1015,into=c("thrombotic.events.ICD10.15","thrombotic.events.ICD10.date.diagnosis.15"),sep="/")
df17<-separate(df16,thrombotic.events.ICD1016,into=c("thrombotic.events.ICD10.16","thrombotic.events.ICD10.date.diagnosis.16"),sep="/")
df18<-separate(df17,thrombotic.events.ICD1017,into=c("thrombotic.events.ICD10.17","thrombotic.events.ICD10.date.diagnosis.17"),sep="/")
df19<-separate(df18,thrombotic.events.ICD1018,into=c("thrombotic.events.ICD10.18","thrombotic.events.ICD10.date.diagnosis.18"),sep="/")
df20<-separate(df19,thrombotic.events.ICD1019,into=c("thrombotic.events.ICD10.19","thrombotic.events.ICD10.date.diagnosis.19"),sep="/")
df21<-separate(df20,thrombotic.events.ICD1020,into=c("thrombotic.events.ICD10.20","thrombotic.events.ICD10.date.diagnosis.20"),sep="/")
df22<-separate(df21,thrombotic.events.ICD1021,into=c("thrombotic.events.ICD10.21","thrombotic.events.ICD10.date.diagnosis.21"),sep="/")
df23<-separate(df22,thrombotic.events.ICD1022,into=c("thrombotic.events.ICD10.22","thrombotic.events.ICD10.date.diagnosis.22"),sep="/")
df24<-separate(df23,thrombotic.events.ICD1023,into=c("thrombotic.events.ICD10.23","thrombotic.events.ICD10.date.diagnosis.23"),sep="/")
df25<-separate(df24,thrombotic.events.ICD1024,into=c("thrombotic.events.ICD10.24","thrombotic.events.ICD10.date.diagnosis.24"),sep="/")
df26<-separate(df25,thrombotic.events.ICD1025,into=c("thrombotic.events.ICD10.25","thrombotic.events.ICD10.date.diagnosis.25"),sep="/")
df27<-separate(df26,thrombotic.events.ICD1026,into=c("thrombotic.events.ICD10.26","thrombotic.events.ICD10.date.diagnosis.26"),sep="/")
df28<-separate(df27,thrombotic.events.ICD1027,into=c("thrombotic.events.ICD10.27","thrombotic.events.ICD10.date.diagnosis.27"),sep="/")
df29<-separate(df28,thrombotic.events.ICD1028,into=c("thrombotic.events.ICD10.28","thrombotic.events.ICD10.date.diagnosis.28"),sep="/")
df30<-separate(df29,thrombotic.events.ICD1029,into=c("thrombotic.events.ICD10.29","thrombotic.events.ICD10.date.diagnosis.29"),sep="/")
df31<-separate(df30,thrombotic.events.ICD1030,into=c("thrombotic.events.ICD10.30","thrombotic.events.ICD10.date.diagnosis.30"),sep="/")
df32<-separate(df31,thrombotic.events.ICD1031,into=c("thrombotic.events.ICD10.31","thrombotic.events.ICD10.date.diagnosis.31"),sep="/")
df33<-separate(df32,thrombotic.events.ICD1032,into=c("thrombotic.events.ICD10.32","thrombotic.events.ICD10.date.diagnosis.32"),sep="/")
df34<-separate(df33,thrombotic.events.ICD1033,into=c("thrombotic.events.ICD10.33","thrombotic.events.ICD10.date.diagnosis.33"),sep="/")
df35<-separate(df34,thrombotic.events.ICD1034,into=c("thrombotic.events.ICD10.34","thrombotic.events.ICD10.date.diagnosis.34"),sep="/")
df36<-separate(df35,thrombotic.events.ICD1035,into=c("thrombotic.events.ICD10.35","thrombotic.events.ICD10.date.diagnosis.35"),sep="/")
df37<-separate(df36,thrombotic.events.ICD1036,into=c("thrombotic.events.ICD10.36","thrombotic.events.ICD10.date.diagnosis.36"),sep="/")
df38<-separate(df37,thrombotic.events.ICD1037,into=c("thrombotic.events.ICD10.37","thrombotic.events.ICD10.date.diagnosis.37"),sep="/")
df39<-separate(df38,thrombotic.events.ICD1038,into=c("thrombotic.events.ICD10.38","thrombotic.events.ICD10.date.diagnosis.38"),sep="/")
df40<-separate(df39,thrombotic.events.ICD1039,into=c("thrombotic.events.ICD10.39","thrombotic.events.ICD10.date.diagnosis.39"),sep="/")
df41<-separate(df40,thrombotic.events.ICD1040,into=c("thrombotic.events.ICD10.40","thrombotic.events.ICD10.date.diagnosis.40"),sep="/")
df42<-separate(df41,thrombotic.events.ICD1041,into=c("thrombotic.events.ICD10.41","thrombotic.events.ICD10.date.diagnosis.41"),sep="/")
df43<-separate(df42,thrombotic.events.ICD1042,into=c("thrombotic.events.ICD10.42","thrombotic.events.ICD10.date.diagnosis.42"),sep="/")
df44<-separate(df43,thrombotic.events.ICD1043,into=c("thrombotic.events.ICD10.43","thrombotic.events.ICD10.date.diagnosis.43"),sep="/")
df45<-separate(df44,thrombotic.events.ICD1044,into=c("thrombotic.events.ICD10.44","thrombotic.events.ICD10.date.diagnosis.44"),sep="/")
df46<-separate(df45,thrombotic.events.ICD1045,into=c("thrombotic.events.ICD10.45","thrombotic.events.ICD10.date.diagnosis.45"),sep="/")
df47<-separate(df46,thrombotic.events.ICD1046,into=c("thrombotic.events.ICD10.46","thrombotic.events.ICD10.date.diagnosis.46"),sep="/")
df48<-separate(df47,thrombotic.events.ICD1047,into=c("thrombotic.events.ICD10.47","thrombotic.events.ICD10.date.diagnosis.47"),sep="/")
df49<-separate(df48,thrombotic.events.ICD1048,into=c("thrombotic.events.ICD10.48","thrombotic.events.ICD10.date.diagnosis.48"),sep="/")
df50<-separate(df49,thrombotic.events.ICD1049,into=c("thrombotic.events.ICD10.49","thrombotic.events.ICD10.date.diagnosis.49"),sep="/")
df51<-separate(df50,thrombotic.events.ICD1050,into=c("thrombotic.events.ICD10.50","thrombotic.events.ICD10.date.diagnosis.50"),sep="/")
df52<-separate(df51,thrombotic.events.ICD1051,into=c("thrombotic.events.ICD10.51","thrombotic.events.ICD10.date.diagnosis.51"),sep="/")
df53<-separate(df52,thrombotic.events.ICD1052,into=c("thrombotic.events.ICD10.52","thrombotic.events.ICD10.date.diagnosis.52"),sep="/")
df54<-separate(df53,thrombotic.events.ICD1053,into=c("thrombotic.events.ICD10.53","thrombotic.events.ICD10.date.diagnosis.53"),sep="/")
df55<-separate(df54,thrombotic.events.ICD1054,into=c("thrombotic.events.ICD10.54","thrombotic.events.ICD10.date.diagnosis.54"),sep="/")
df56<-separate(df55,thrombotic.events.ICD1055,into=c("thrombotic.events.ICD10.55","thrombotic.events.ICD10.date.diagnosis.55"),sep="/")
df57<-separate(df56,thrombotic.events.ICD1056,into=c("thrombotic.events.ICD10.56","thrombotic.events.ICD10.date.diagnosis.56"),sep="/")
df58<-separate(df57,thrombotic.events.ICD1057,into=c("thrombotic.events.ICD10.57","thrombotic.events.ICD10.date.diagnosis.57"),sep="/")
df59<-separate(df58,thrombotic.events.ICD1058,into=c("thrombotic.events.ICD10.58","thrombotic.events.ICD10.date.diagnosis.58"),sep="/")
df60<-separate(df59,thrombotic.events.ICD1059,into=c("thrombotic.events.ICD10.59","thrombotic.events.ICD10.date.diagnosis.59"),sep="/")
df61<-separate(df60,thrombotic.events.ICD1060,into=c("thrombotic.events.ICD10.60","thrombotic.events.ICD10.date.diagnosis.60"),sep="/")
df62<-separate(df61,thrombotic.events.ICD1061,into=c("thrombotic.events.ICD10.61","thrombotic.events.ICD10.date.diagnosis.61"),sep="/")
df63<-separate(df62,thrombotic.events.ICD1062,into=c("thrombotic.events.ICD10.62","thrombotic.events.ICD10.date.diagnosis.62"),sep="/")
df64<-separate(df63,thrombotic.events.ICD1063,into=c("thrombotic.events.ICD10.63","thrombotic.events.ICD10.date.diagnosis.63"),sep="/")
df65<-separate(df64,thrombotic.events.ICD1064,into=c("thrombotic.events.ICD10.64","thrombotic.events.ICD10.date.diagnosis.64"),sep="/")
df66<-separate(df65,thrombotic.events.ICD1065,into=c("thrombotic.events.ICD10.65","thrombotic.events.ICD10.date.diagnosis.65"),sep="/")
df67<-separate(df66,thrombotic.events.ICD1066,into=c("thrombotic.events.ICD10.66","thrombotic.events.ICD10.date.diagnosis.66"),sep="/")
df68<-separate(df67,thrombotic.events.ICD1067,into=c("thrombotic.events.ICD10.67","thrombotic.events.ICD10.date.diagnosis.67"),sep="/")
df69<-separate(df68,thrombotic.events.ICD1068,into=c("thrombotic.events.ICD10.68","thrombotic.events.ICD10.date.diagnosis.68"),sep="/")
df70<-separate(df69,thrombotic.events.ICD1069,into=c("thrombotic.events.ICD10.69","thrombotic.events.ICD10.date.diagnosis.69"),sep="/")
df71<-separate(df70,thrombotic.events.ICD1070,into=c("thrombotic.events.ICD10.70","thrombotic.events.ICD10.date.diagnosis.70"),sep="/")
df72<-separate(df71,thrombotic.events.ICD1071,into=c("thrombotic.events.ICD10.71","thrombotic.events.ICD10.date.diagnosis.71"),sep="/")
df73<-separate(df72,thrombotic.events.ICD1072,into=c("thrombotic.events.ICD10.72","thrombotic.events.ICD10.date.diagnosis.72"),sep="/")
df74<-separate(df73,thrombotic.events.ICD1073,into=c("thrombotic.events.ICD10.73","thrombotic.events.ICD10.date.diagnosis.73"),sep="/")
df75<-separate(df74,thrombotic.events.ICD1074,into=c("thrombotic.events.ICD10.74","thrombotic.events.ICD10.date.diagnosis.74"),sep="/")
df76<-separate(df75,thrombotic.events.ICD1075,into=c("thrombotic.events.ICD10.75","thrombotic.events.ICD10.date.diagnosis.75"),sep="/")
df77<-separate(df76,thrombotic.events.ICD1076,into=c("thrombotic.events.ICD10.76","thrombotic.events.ICD10.date.diagnosis.76"),sep="/")
df78<-separate(df77,thrombotic.events.ICD1077,into=c("thrombotic.events.ICD10.77","thrombotic.events.ICD10.date.diagnosis.77"),sep="/")
df79<-separate(df78,thrombotic.events.ICD1078,into=c("thrombotic.events.ICD10.78","thrombotic.events.ICD10.date.diagnosis.78"),sep="/")
df80<-separate(df79,thrombotic.events.ICD1079,into=c("thrombotic.events.ICD10.79","thrombotic.events.ICD10.date.diagnosis.79"),sep="/")
df81<-separate(df80,thrombotic.events.ICD1080,into=c("thrombotic.events.ICD10.80","thrombotic.events.ICD10.date.diagnosis.80"),sep="/")
df82<-separate(df81,thrombotic.events.ICD1081,into=c("thrombotic.events.ICD10.81","thrombotic.events.ICD10.date.diagnosis.81"),sep="/")
df83<-separate(df82,thrombotic.events.ICD1082,into=c("thrombotic.events.ICD10.82","thrombotic.events.ICD10.date.diagnosis.82"),sep="/")
df84<-separate(df83,thrombotic.events.ICD1083,into=c("thrombotic.events.ICD10.83","thrombotic.events.ICD10.date.diagnosis.83"),sep="/")
df85<-separate(df84,thrombotic.events.ICD1084,into=c("thrombotic.events.ICD10.84","thrombotic.events.ICD10.date.diagnosis.84"),sep="/")
df86<-separate(df85,thrombotic.events.ICD1085,into=c("thrombotic.events.ICD10.85","thrombotic.events.ICD10.date.diagnosis.85"),sep="/")
df87<-separate(df86,thrombotic.events.ICD1086,into=c("thrombotic.events.ICD10.86","thrombotic.events.ICD10.date.diagnosis.86"),sep="/")
df88<-separate(df87,thrombotic.events.ICD1087,into=c("thrombotic.events.ICD10.87","thrombotic.events.ICD10.date.diagnosis.87"),sep="/")
df89<-separate(df88,thrombotic.events.ICD1088,into=c("thrombotic.events.ICD10.88","thrombotic.events.ICD10.date.diagnosis.88"),sep="/")
df90<-separate(df89,thrombotic.events.ICD1089,into=c("thrombotic.events.ICD10.89","thrombotic.events.ICD10.date.diagnosis.89"),sep="/")
df91<-separate(df90,thrombotic.events.ICD1090,into=c("thrombotic.events.ICD10.90","thrombotic.events.ICD10.date.diagnosis.90"),sep="/")
df92<-separate(df91,thrombotic.events.ICD1091,into=c("thrombotic.events.ICD10.91","thrombotic.events.ICD10.date.diagnosis.91"),sep="/")
df93<-separate(df92,thrombotic.events.ICD1092,into=c("thrombotic.events.ICD10.92","thrombotic.events.ICD10.date.diagnosis.92"),sep="/")
df94<-separate(df93,thrombotic.events.ICD1093,into=c("thrombotic.events.ICD10.93","thrombotic.events.ICD10.date.diagnosis.93"),sep="/")
df95<-separate(df94,thrombotic.events.ICD1094,into=c("thrombotic.events.ICD10.94","thrombotic.events.ICD10.date.diagnosis.94"),sep="/")
df96<-separate(df95,thrombotic.events.ICD1095,into=c("thrombotic.events.ICD10.95","thrombotic.events.ICD10.date.diagnosis.95"),sep="/")
df97<-separate(df96,thrombotic.events.ICD1096,into=c("thrombotic.events.ICD10.96","thrombotic.events.ICD10.date.diagnosis.96"),sep="/")
df98<-separate(df97,thrombotic.events.ICD1097,into=c("thrombotic.events.ICD10.97","thrombotic.events.ICD10.date.diagnosis.97"),sep="/")
df99<-separate(df98,thrombotic.events.ICD1098,into=c("thrombotic.events.ICD10.98","thrombotic.events.ICD10.date.diagnosis.98"),sep="/")
df100<-separate(df99,thrombotic.events.ICD1099,into=c("thrombotic.events.ICD10.99","thrombotic.events.ICD10.date.diagnosis.99"),sep="/")
df101<-separate(df100,thrombotic.events.ICD10100,into=c("thrombotic.events.ICD10.100","thrombotic.events.ICD10.date.diagnosis.100"),sep="/")
df102<-separate(df101,thrombotic.events.ICD10101,into=c("thrombotic.events.ICD10.101","thrombotic.events.ICD10.date.diagnosis.101"),sep="/")
df103<-separate(df102,thrombotic.events.ICD10102,into=c("thrombotic.events.ICD10.102","thrombotic.events.ICD10.date.diagnosis.102"),sep="/")
df104<-separate(df103,thrombotic.events.ICD10103,into=c("thrombotic.events.ICD10.103","thrombotic.events.ICD10.date.diagnosis.103"),sep="/")
df105<-separate(df104,thrombotic.events.ICD10104,into=c("thrombotic.events.ICD10.104","thrombotic.events.ICD10.date.diagnosis.104"),sep="/")
df106<-separate(df105,thrombotic.events.ICD10105,into=c("thrombotic.events.ICD10.105","thrombotic.events.ICD10.date.diagnosis.105"),sep="/")
df107<-separate(df106,thrombotic.events.ICD10106,into=c("thrombotic.events.ICD10.106","thrombotic.events.ICD10.date.diagnosis.106"),sep="/")
df108<-separate(df107,thrombotic.events.ICD10107,into=c("thrombotic.events.ICD10.107","thrombotic.events.ICD10.date.diagnosis.107"),sep="/")
df109<-separate(df108,thrombotic.events.ICD10108,into=c("thrombotic.events.ICD10.108","thrombotic.events.ICD10.date.diagnosis.108"),sep="/")
df110<-separate(df109,thrombotic.events.ICD10109,into=c("thrombotic.events.ICD10.109","thrombotic.events.ICD10.date.diagnosis.109"),sep="/")
df111<-separate(df110,thrombotic.events.ICD10110,into=c("thrombotic.events.ICD10.110","thrombotic.events.ICD10.date.diagnosis.110"),sep="/")
df112<-separate(df111,thrombotic.events.ICD10111,into=c("thrombotic.events.ICD10.111","thrombotic.events.ICD10.date.diagnosis.111"),sep="/")
df113<-separate(df112,thrombotic.events.ICD10112,into=c("thrombotic.events.ICD10.112","thrombotic.events.ICD10.date.diagnosis.112"),sep="/")
df114<-separate(df113,thrombotic.events.ICD10113,into=c("thrombotic.events.ICD10.113","thrombotic.events.ICD10.date.diagnosis.113"),sep="/")
df115<-separate(df114,thrombotic.events.ICD10114,into=c("thrombotic.events.ICD10.114","thrombotic.events.ICD10.date.diagnosis.114"),sep="/")
df116<-separate(df115,thrombotic.events.ICD10115,into=c("thrombotic.events.ICD10.115","thrombotic.events.ICD10.date.diagnosis.115"),sep="/")
df117<-separate(df116,thrombotic.events.ICD10116,into=c("thrombotic.events.ICD10.116","thrombotic.events.ICD10.date.diagnosis.116"),sep="/")
df118<-separate(df117,thrombotic.events.ICD10117,into=c("thrombotic.events.ICD10.117","thrombotic.events.ICD10.date.diagnosis.117"),sep="/")
df119<-separate(df118,thrombotic.events.ICD10118,into=c("thrombotic.events.ICD10.118","thrombotic.events.ICD10.date.diagnosis.118"),sep="/")
df120<-separate(df119,thrombotic.events.ICD10119,into=c("thrombotic.events.ICD10.119","thrombotic.events.ICD10.date.diagnosis.119"),sep="/")
df121<-separate(df120,thrombotic.events.ICD10120,into=c("thrombotic.events.ICD10.120","thrombotic.events.ICD10.date.diagnosis.120"),sep="/")
df122<-separate(df121,thrombotic.events.ICD10121,into=c("thrombotic.events.ICD10.121","thrombotic.events.ICD10.date.diagnosis.121"),sep="/")
df123<-separate(df122,thrombotic.events.ICD10122,into=c("thrombotic.events.ICD10.122","thrombotic.events.ICD10.date.diagnosis.122"),sep="/")
df124<-separate(df123,thrombotic.events.ICD10123,into=c("thrombotic.events.ICD10.123","thrombotic.events.ICD10.date.diagnosis.123"),sep="/")
df125<-separate(df124,thrombotic.events.ICD10124,into=c("thrombotic.events.ICD10.124","thrombotic.events.ICD10.date.diagnosis.124"),sep="/")
df126<-separate(df125,thrombotic.events.ICD10125,into=c("thrombotic.events.ICD10.125","thrombotic.events.ICD10.date.diagnosis.125"),sep="/")
df127<-separate(df126,thrombotic.events.ICD10126,into=c("thrombotic.events.ICD10.126","thrombotic.events.ICD10.date.diagnosis.126"),sep="/")
df128<-separate(df127,thrombotic.events.ICD10127,into=c("thrombotic.events.ICD10.127","thrombotic.events.ICD10.date.diagnosis.127"),sep="/")
df129<-separate(df128,thrombotic.events.ICD10128,into=c("thrombotic.events.ICD10.128","thrombotic.events.ICD10.date.diagnosis.128"),sep="/")
df130<-separate(df129,thrombotic.events.ICD10129,into=c("thrombotic.events.ICD10.129","thrombotic.events.ICD10.date.diagnosis.129"),sep="/")
df131<-separate(df130,thrombotic.events.ICD10130,into=c("thrombotic.events.ICD10.130","thrombotic.events.ICD10.date.diagnosis.130"),sep="/")
df132<-separate(df131,thrombotic.events.ICD10131,into=c("thrombotic.events.ICD10.131","thrombotic.events.ICD10.date.diagnosis.131"),sep="/")
df133<-separate(df132,thrombotic.events.ICD10132,into=c("thrombotic.events.ICD10.132","thrombotic.events.ICD10.date.diagnosis.132"),sep="/")
df134<-separate(df133,thrombotic.events.ICD10133,into=c("thrombotic.events.ICD10.133","thrombotic.events.ICD10.date.diagnosis.133"),sep="/")
df135<-separate(df134,thrombotic.events.ICD10134,into=c("thrombotic.events.ICD10.134","thrombotic.events.ICD10.date.diagnosis.134"),sep="/")
df136<-separate(df135,thrombotic.events.ICD10135,into=c("thrombotic.events.ICD10.135","thrombotic.events.ICD10.date.diagnosis.135"),sep="/")
df137<-separate(df136,thrombotic.events.ICD10136,into=c("thrombotic.events.ICD10.136","thrombotic.events.ICD10.date.diagnosis.136"),sep="/")
df138<-separate(df137,thrombotic.events.ICD10137,into=c("thrombotic.events.ICD10.137","thrombotic.events.ICD10.date.diagnosis.137"),sep="/")
df139<-separate(df138,thrombotic.events.ICD10138,into=c("thrombotic.events.ICD10.138","thrombotic.events.ICD10.date.diagnosis.138"),sep="/")
df140<-separate(df139,thrombotic.events.ICD10139,into=c("thrombotic.events.ICD10.139","thrombotic.events.ICD10.date.diagnosis.139"),sep="/")
df141<-separate(df140,thrombotic.events.ICD10140,into=c("thrombotic.events.ICD10.140","thrombotic.events.ICD10.date.diagnosis.140"),sep="/")
df142<-separate(df141,thrombotic.events.ICD10141,into=c("thrombotic.events.ICD10.141","thrombotic.events.ICD10.date.diagnosis.141"),sep="/")
df143<-separate(df142,thrombotic.events.ICD10142,into=c("thrombotic.events.ICD10.142","thrombotic.events.ICD10.date.diagnosis.142"),sep="/")
df144<-separate(df143,thrombotic.events.ICD10143,into=c("thrombotic.events.ICD10.143","thrombotic.events.ICD10.date.diagnosis.143"),sep="/")
df145<-separate(df144,thrombotic.events.ICD10144,into=c("thrombotic.events.ICD10.144","thrombotic.events.ICD10.date.diagnosis.144"),sep="/")
df146<-separate(df145,thrombotic.events.ICD10145,into=c("thrombotic.events.ICD10.145","thrombotic.events.ICD10.date.diagnosis.145"),sep="/")
df147<-separate(df146,thrombotic.events.ICD10146,into=c("thrombotic.events.ICD10.146","thrombotic.events.ICD10.date.diagnosis.146"),sep="/")
df148<-separate(df147,thrombotic.events.ICD10147,into=c("thrombotic.events.ICD10.147","thrombotic.events.ICD10.date.diagnosis.147"),sep="/")
df149<-separate(df148,thrombotic.events.ICD10148,into=c("thrombotic.events.ICD10.148","thrombotic.events.ICD10.date.diagnosis.148"),sep="/")
df150<-separate(df149,thrombotic.events.ICD10149,into=c("thrombotic.events.ICD10.149","thrombotic.events.ICD10.date.diagnosis.149"),sep="/")
df151<-separate(df150,thrombotic.events.ICD10150,into=c("thrombotic.events.ICD10.150","thrombotic.events.ICD10.date.diagnosis.150"),sep="/")
df152<-separate(df151,thrombotic.events.ICD10151,into=c("thrombotic.events.ICD10.151","thrombotic.events.ICD10.date.diagnosis.151"),sep="/")
df153<-separate(df152,thrombotic.events.ICD10152,into=c("thrombotic.events.ICD10.152","thrombotic.events.ICD10.date.diagnosis.152"),sep="/")
df154<-separate(df153,thrombotic.events.ICD10153,into=c("thrombotic.events.ICD10.153","thrombotic.events.ICD10.date.diagnosis.153"),sep="/")
df155<-separate(df154,thrombotic.events.ICD10154,into=c("thrombotic.events.ICD10.154","thrombotic.events.ICD10.date.diagnosis.154"),sep="/")
df156<-separate(df155,thrombotic.events.ICD10155,into=c("thrombotic.events.ICD10.155","thrombotic.events.ICD10.date.diagnosis.155"),sep="/")
df157<-separate(df156,thrombotic.events.ICD10156,into=c("thrombotic.events.ICD10.156","thrombotic.events.ICD10.date.diagnosis.156"),sep="/")
df158<-separate(df157,thrombotic.events.ICD10157,into=c("thrombotic.events.ICD10.157","thrombotic.events.ICD10.date.diagnosis.157"),sep="/")
df159<-separate(df158,thrombotic.events.ICD10158,into=c("thrombotic.events.ICD10.158","thrombotic.events.ICD10.date.diagnosis.158"),sep="/")
df160<-separate(df159,thrombotic.events.ICD10159,into=c("thrombotic.events.ICD10.159","thrombotic.events.ICD10.date.diagnosis.159"),sep="/")
df161<-separate(df160,thrombotic.events.ICD10160,into=c("thrombotic.events.ICD10.160","thrombotic.events.ICD10.date.diagnosis.160"),sep="/")
df162<-separate(df161,thrombotic.events.ICD10161,into=c("thrombotic.events.ICD10.161","thrombotic.events.ICD10.date.diagnosis.161"),sep="/")
df163<-separate(df162,thrombotic.events.ICD10162,into=c("thrombotic.events.ICD10.162","thrombotic.events.ICD10.date.diagnosis.162"),sep="/")
df164<-separate(df163,thrombotic.events.ICD10163,into=c("thrombotic.events.ICD10.163","thrombotic.events.ICD10.date.diagnosis.163"),sep="/")
df165<-separate(df164,thrombotic.events.ICD10164,into=c("thrombotic.events.ICD10.164","thrombotic.events.ICD10.date.diagnosis.164"),sep="/")
df166<-separate(df165,thrombotic.events.ICD10165,into=c("thrombotic.events.ICD10.165","thrombotic.events.ICD10.date.diagnosis.165"),sep="/")
df167<-separate(df166,thrombotic.events.ICD10166,into=c("thrombotic.events.ICD10.166","thrombotic.events.ICD10.date.diagnosis.166"),sep="/")
df168<-separate(df167,thrombotic.events.ICD10167,into=c("thrombotic.events.ICD10.167","thrombotic.events.ICD10.date.diagnosis.167"),sep="/")
df169<-separate(df168,thrombotic.events.ICD10168,into=c("thrombotic.events.ICD10.168","thrombotic.events.ICD10.date.diagnosis.168"),sep="/")
df170<-separate(df169,thrombotic.events.ICD10169,into=c("thrombotic.events.ICD10.169","thrombotic.events.ICD10.date.diagnosis.169"),sep="/")
df171<-separate(df170,thrombotic.events.ICD10170,into=c("thrombotic.events.ICD10.170","thrombotic.events.ICD10.date.diagnosis.170"),sep="/")
df172<-separate(df171,thrombotic.events.ICD10171,into=c("thrombotic.events.ICD10.171","thrombotic.events.ICD10.date.diagnosis.171"),sep="/")
df173<-separate(df172,thrombotic.events.ICD10172,into=c("thrombotic.events.ICD10.172","thrombotic.events.ICD10.date.diagnosis.172"),sep="/")
df174<-separate(df173,thrombotic.events.ICD10173,into=c("thrombotic.events.ICD10.173","thrombotic.events.ICD10.date.diagnosis.173"),sep="/")
df175<-separate(df174,thrombotic.events.ICD10174,into=c("thrombotic.events.ICD10.174","thrombotic.events.ICD10.date.diagnosis.174"),sep="/")
df176<-separate(df175,thrombotic.events.ICD10175,into=c("thrombotic.events.ICD10.175","thrombotic.events.ICD10.date.diagnosis.175"),sep="/")
df177<-separate(df176,thrombotic.events.ICD10176,into=c("thrombotic.events.ICD10.176","thrombotic.events.ICD10.date.diagnosis.176"),sep="/")
df178<-separate(df177,thrombotic.events.ICD10177,into=c("thrombotic.events.ICD10.177","thrombotic.events.ICD10.date.diagnosis.177"),sep="/")
df179<-separate(df178,thrombotic.events.ICD10178,into=c("thrombotic.events.ICD10.178","thrombotic.events.ICD10.date.diagnosis.178"),sep="/")
df180<-separate(df179,thrombotic.events.ICD10179,into=c("thrombotic.events.ICD10.179","thrombotic.events.ICD10.date.diagnosis.179"),sep="/")
df181<-separate(df180,thrombotic.events.ICD10180,into=c("thrombotic.events.ICD10.180","thrombotic.events.ICD10.date.diagnosis.180"),sep="/")
df182<-separate(df181,thrombotic.events.ICD10181,into=c("thrombotic.events.ICD10.181","thrombotic.events.ICD10.date.diagnosis.181"),sep="/")
df183<-separate(df182,thrombotic.events.ICD10182,into=c("thrombotic.events.ICD10.182","thrombotic.events.ICD10.date.diagnosis.182"),sep="/")
df184<-separate(df183,thrombotic.events.ICD10183,into=c("thrombotic.events.ICD10.183","thrombotic.events.ICD10.date.diagnosis.183"),sep="/")
df185<-separate(df184,thrombotic.events.ICD10184,into=c("thrombotic.events.ICD10.184","thrombotic.events.ICD10.date.diagnosis.184"),sep="/")
df186<-separate(df185,thrombotic.events.ICD10185,into=c("thrombotic.events.ICD10.185","thrombotic.events.ICD10.date.diagnosis.185"),sep="/")
df187<-separate(df186,thrombotic.events.ICD10186,into=c("thrombotic.events.ICD10.186","thrombotic.events.ICD10.date.diagnosis.186"),sep="/")
df188<-separate(df187,thrombotic.events.ICD10187,into=c("thrombotic.events.ICD10.187","thrombotic.events.ICD10.date.diagnosis.187"),sep="/")
df189<-separate(df188,thrombotic.events.ICD10188,into=c("thrombotic.events.ICD10.188","thrombotic.events.ICD10.date.diagnosis.188"),sep="/")
df190<-separate(df189,thrombotic.events.ICD10189,into=c("thrombotic.events.ICD10.189","thrombotic.events.ICD10.date.diagnosis.189"),sep="/")
df191<-separate(df190,thrombotic.events.ICD10190,into=c("thrombotic.events.ICD10.190","thrombotic.events.ICD10.date.diagnosis.190"),sep="/")
df192<-separate(df191,thrombotic.events.ICD10191,into=c("thrombotic.events.ICD10.191","thrombotic.events.ICD10.date.diagnosis.191"),sep="/")
df193<-separate(df192,thrombotic.events.ICD10192,into=c("thrombotic.events.ICD10.192","thrombotic.events.ICD10.date.diagnosis.192"),sep="/")
df194<-separate(df193,thrombotic.events.ICD10193,into=c("thrombotic.events.ICD10.193","thrombotic.events.ICD10.date.diagnosis.193"),sep="/")
df195<-separate(df194,thrombotic.events.ICD10194,into=c("thrombotic.events.ICD10.194","thrombotic.events.ICD10.date.diagnosis.194"),sep="/")
df196<-separate(df195,thrombotic.events.ICD10195,into=c("thrombotic.events.ICD10.195","thrombotic.events.ICD10.date.diagnosis.195"),sep="/")
df197<-separate(df196,thrombotic.events.ICD10196,into=c("thrombotic.events.ICD10.196","thrombotic.events.ICD10.date.diagnosis.196"),sep="/")
df198<-separate(df197,thrombotic.events.ICD10197,into=c("thrombotic.events.ICD10.197","thrombotic.events.ICD10.date.diagnosis.197"),sep="/")
df199<-separate(df198,thrombotic.events.ICD10198,into=c("thrombotic.events.ICD10.198","thrombotic.events.ICD10.date.diagnosis.198"),sep="/")
df200<-separate(df199,thrombotic.events.ICD10199,into=c("thrombotic.events.ICD10.199","thrombotic.events.ICD10.date.diagnosis.199"),sep="/")
df201<-separate(df200,thrombotic.events.ICD10200,into=c("thrombotic.events.ICD10.200","thrombotic.events.ICD10.date.diagnosis.200"),sep="/")
df202<-separate(df201,thrombotic.events.ICD10201,into=c("thrombotic.events.ICD10.201","thrombotic.events.ICD10.date.diagnosis.201"),sep="/")
df203<-separate(df202,thrombotic.events.ICD10202,into=c("thrombotic.events.ICD10.202","thrombotic.events.ICD10.date.diagnosis.202"),sep="/")
df204<-separate(df203,thrombotic.events.ICD10203,into=c("thrombotic.events.ICD10.203","thrombotic.events.ICD10.date.diagnosis.203"),sep="/")
df205<-separate(df204,thrombotic.events.ICD10204,into=c("thrombotic.events.ICD10.204","thrombotic.events.ICD10.date.diagnosis.204"),sep="/")
df206<-separate(df205,thrombotic.events.ICD10205,into=c("thrombotic.events.ICD10.205","thrombotic.events.ICD10.date.diagnosis.205"),sep="/")
df207<-separate(df206,thrombotic.events.ICD10206,into=c("thrombotic.events.ICD10.206","thrombotic.events.ICD10.date.diagnosis.206"),sep="/")
df208<-separate(df207,thrombotic.events.ICD10207,into=c("thrombotic.events.ICD10.207","thrombotic.events.ICD10.date.diagnosis.207"),sep="/")
df209<-separate(df208,thrombotic.events.ICD10208,into=c("thrombotic.events.ICD10.208","thrombotic.events.ICD10.date.diagnosis.208"),sep="/")
df210<-separate(df209,thrombotic.events.ICD10209,into=c("thrombotic.events.ICD10.209","thrombotic.events.ICD10.date.diagnosis.209"),sep="/")
df211<-separate(df210,thrombotic.events.ICD10210,into=c("thrombotic.events.ICD10.210","thrombotic.events.ICD10.date.diagnosis.210"),sep="/")
df212<-separate(df211,thrombotic.events.ICD10211,into=c("thrombotic.events.ICD10.211","thrombotic.events.ICD10.date.diagnosis.211"),sep="/")
df213<-separate(df212,thrombotic.events.ICD10212,into=c("thrombotic.events.ICD10.212","thrombotic.events.ICD10.date.diagnosis.212"),sep="/")
df214<-separate(df213,thrombotic.events.ICD10213,into=c("thrombotic.events.ICD10.213","thrombotic.events.ICD10.date.diagnosis.213"),sep="/")
df215<-separate(df214,otherICD101,into=c("other.ICD10.1","other.ICD10.date.diagnosis.1"),sep="/")
df216<-separate(df215,otherICD102,into=c("other.ICD10.2","other.ICD10.date.diagnosis.2"),sep="/")
df217<-separate(df216,otherICD103,into=c("other.ICD10.3","other.ICD10.date.diagnosis.3"),sep="/")
df218<-separate(df217,otherICD104,into=c("other.ICD10.4","other.ICD10.date.diagnosis.4"),sep="/")
df219<-separate(df218,otherICD105,into=c("other.ICD10.5","other.ICD10.date.diagnosis.5"),sep="/")
df220<-separate(df219,otherICD106,into=c("other.ICD10.6","other.ICD10.date.diagnosis.6"),sep="/")
df221<-separate(df220,otherICD107,into=c("other.ICD10.7","other.ICD10.date.diagnosis.7"),sep="/")
df222<-separate(df221,otherICD108,into=c("other.ICD10.8","other.ICD10.date.diagnosis.8"),sep="/")
df223<-separate(df222,otherICD109,into=c("other.ICD10.9","other.ICD10.date.diagnosis.9"),sep="/")
df224<-separate(df223,otherICD1010,into=c("other.ICD10.10","other.ICD10.date.diagnosis.10"),sep="/")
df225<-separate(df224,otherICD1011,into=c("other.ICD10.11","other.ICD10.date.diagnosis.11"),sep="/")
df226<-separate(df225,otherICD1012,into=c("other.ICD10.12","other.ICD10.date.diagnosis.12"),sep="/")
df227<-separate(df226,otherICD1013,into=c("other.ICD10.13","other.ICD10.date.diagnosis.13"),sep="/")
df228<-separate(df227,otherICD1014,into=c("other.ICD10.14","other.ICD10.date.diagnosis.14"),sep="/")
df229<-separate(df228,otherICD1015,into=c("other.ICD10.15","other.ICD10.date.diagnosis.15"),sep="/")
df230<-separate(df229,otherICD1016,into=c("other.ICD10.16","other.ICD10.date.diagnosis.16"),sep="/")
df231<-separate(df230,otherICD1017,into=c("other.ICD10.17","other.ICD10.date.diagnosis.17"),sep="/")
df232<-separate(df231,otherICD1018,into=c("other.ICD10.18","other.ICD10.date.diagnosis.18"),sep="/")
df233<-separate(df232,otherICD1019,into=c("other.ICD10.19","other.ICD10.date.diagnosis.19"),sep="/")
df234<-separate(df233,otherICD1020,into=c("other.ICD10.20","other.ICD10.date.diagnosis.20"),sep="/")
df235<-separate(df234,otherICD1021,into=c("other.ICD10.21","other.ICD10.date.diagnosis.21"),sep="/")
df236<-separate(df235,otherICD1022,into=c("other.ICD10.22","other.ICD10.date.diagnosis.22"),sep="/")
df237<-separate(df236,otherICD1023,into=c("other.ICD10.23","other.ICD10.date.diagnosis.23"),sep="/")
df238<-separate(df237,otherICD1024,into=c("other.ICD10.24","other.ICD10.date.diagnosis.24"),sep="/")
df239<-separate(df238,otherICD1025,into=c("other.ICD10.25","other.ICD10.date.diagnosis.25"),sep="/")
df240<-separate(df239,otherICD1026,into=c("other.ICD10.26","other.ICD10.date.diagnosis.26"),sep="/")
df241<-separate(df240,otherICD1027,into=c("other.ICD10.27","other.ICD10.date.diagnosis.27"),sep="/")
df242<-separate(df241,otherICD1028,into=c("other.ICD10.28","other.ICD10.date.diagnosis.28"),sep="/")
df243<-separate(df242,otherICD1029,into=c("other.ICD10.29","other.ICD10.date.diagnosis.29"),sep="/")
df244<-separate(df243,otherICD1030,into=c("other.ICD10.30","other.ICD10.date.diagnosis.30"),sep="/")
df245<-separate(df244,otherICD1031,into=c("other.ICD10.31","other.ICD10.date.diagnosis.31"),sep="/")
df246<-separate(df245,otherICD1032,into=c("other.ICD10.32","other.ICD10.date.diagnosis.32"),sep="/")
df247<-separate(df246,otherICD1033,into=c("other.ICD10.33","other.ICD10.date.diagnosis.33"),sep="/")
df248<-separate(df247,otherICD1034,into=c("other.ICD10.34","other.ICD10.date.diagnosis.34"),sep="/")
df249<-separate(df248,otherICD1035,into=c("other.ICD10.35","other.ICD10.date.diagnosis.35"),sep="/")
df250<-separate(df249,otherICD1036,into=c("other.ICD10.36","other.ICD10.date.diagnosis.36"),sep="/")
df251<-separate(df250,otherICD1037,into=c("other.ICD10.37","other.ICD10.date.diagnosis.37"),sep="/")
df252<-separate(df251,otherICD1038,into=c("other.ICD10.38","other.ICD10.date.diagnosis.38"),sep="/")
df253<-separate(df252,otherICD1039,into=c("other.ICD10.39","other.ICD10.date.diagnosis.39"),sep="/")
df254<-separate(df253,otherICD1040,into=c("other.ICD10.40","other.ICD10.date.diagnosis.40"),sep="/")
df255<-separate(df254,otherICD1041,into=c("other.ICD10.41","other.ICD10.date.diagnosis.41"),sep="/")
df256<-separate(df255,otherICD1042,into=c("other.ICD10.42","other.ICD10.date.diagnosis.42"),sep="/")
df257<-separate(df256,otherICD1043,into=c("other.ICD10.43","other.ICD10.date.diagnosis.43"),sep="/")
df258<-separate(df257,otherICD1044,into=c("other.ICD10.44","other.ICD10.date.diagnosis.44"),sep="/")
df259<-separate(df258,otherICD1045,into=c("other.ICD10.45","other.ICD10.date.diagnosis.45"),sep="/")
df260<-separate(df259,otherICD1046,into=c("other.ICD10.46","other.ICD10.date.diagnosis.46"),sep="/")
df261<-separate(df260,otherICD1047,into=c("other.ICD10.47","other.ICD10.date.diagnosis.47"),sep="/")
df262<-separate(df261,otherICD1048,into=c("other.ICD10.48","other.ICD10.date.diagnosis.48"),sep="/")
df263<-separate(df262,otherICD1049,into=c("other.ICD10.49","other.ICD10.date.diagnosis.49"),sep="/")
df264<-separate(df263,otherICD1050,into=c("other.ICD10.50","other.ICD10.date.diagnosis.50"),sep="/")
df265<-separate(df264,otherICD1051,into=c("other.ICD10.51","other.ICD10.date.diagnosis.51"),sep="/")
df266<-separate(df265,otherICD1052,into=c("other.ICD10.52","other.ICD10.date.diagnosis.52"),sep="/")
df267<-separate(df266,otherICD1053,into=c("other.ICD10.53","other.ICD10.date.diagnosis.53"),sep="/")
df268<-separate(df267,otherICD1054,into=c("other.ICD10.54","other.ICD10.date.diagnosis.54"),sep="/")
df269<-separate(df268,otherICD1055,into=c("other.ICD10.55","other.ICD10.date.diagnosis.55"),sep="/")
df270<-separate(df269,otherICD1056,into=c("other.ICD10.56","other.ICD10.date.diagnosis.56"),sep="/")
df271<-separate(df270,otherICD1057,into=c("other.ICD10.57","other.ICD10.date.diagnosis.57"),sep="/")
df272<-separate(df271,otherICD1058,into=c("other.ICD10.58","other.ICD10.date.diagnosis.58"),sep="/")
df273<-separate(df272,otherICD1059,into=c("other.ICD10.59","other.ICD10.date.diagnosis.59"),sep="/")
df274<-separate(df273,otherICD1060,into=c("other.ICD10.60","other.ICD10.date.diagnosis.60"),sep="/")
df275<-separate(df274,otherICD1061,into=c("other.ICD10.61","other.ICD10.date.diagnosis.61"),sep="/")
df276<-separate(df275,otherICD1062,into=c("other.ICD10.62","other.ICD10.date.diagnosis.62"),sep="/")
df277<-separate(df276,otherICD1063,into=c("other.ICD10.63","other.ICD10.date.diagnosis.63"),sep="/")
df278<-separate(df277,otherICD1064,into=c("other.ICD10.64","other.ICD10.date.diagnosis.64"),sep="/")
df279<-separate(df278,otherICD1065,into=c("other.ICD10.65","other.ICD10.date.diagnosis.65"),sep="/")
df280<-separate(df279,otherICD1066,into=c("other.ICD10.66","other.ICD10.date.diagnosis.66"),sep="/")
df281<-separate(df280,otherICD1067,into=c("other.ICD10.67","other.ICD10.date.diagnosis.67"),sep="/")
df282<-separate(df281,otherICD1068,into=c("other.ICD10.68","other.ICD10.date.diagnosis.68"),sep="/")
df283<-separate(df282,otherICD1069,into=c("other.ICD10.69","other.ICD10.date.diagnosis.69"),sep="/")
df284<-separate(df283,otherICD1070,into=c("other.ICD10.70","other.ICD10.date.diagnosis.70"),sep="/")
df285<-separate(df284,otherICD1071,into=c("other.ICD10.71","other.ICD10.date.diagnosis.71"),sep="/")
df286<-separate(df285,otherICD1072,into=c("other.ICD10.72","other.ICD10.date.diagnosis.72"),sep="/")
df287<-separate(df286,otherICD1073,into=c("other.ICD10.73","other.ICD10.date.diagnosis.73"),sep="/")
df288<-separate(df287,otherICD1074,into=c("other.ICD10.74","other.ICD10.date.diagnosis.74"),sep="/")
df289<-separate(df288,otherICD1075,into=c("other.ICD10.75","other.ICD10.date.diagnosis.75"),sep="/")
df290<-separate(df289,otherICD1076,into=c("other.ICD10.76","other.ICD10.date.diagnosis.76"),sep="/")
df291<-separate(df290,otherICD1077,into=c("other.ICD10.77","other.ICD10.date.diagnosis.77"),sep="/")
df292<-separate(df291,otherICD1078,into=c("other.ICD10.78","other.ICD10.date.diagnosis.78"),sep="/")
df293<-separate(df292,otherICD1079,into=c("other.ICD10.79","other.ICD10.date.diagnosis.79"),sep="/")
df294<-separate(df293,otherICD1080,into=c("other.ICD10.80","other.ICD10.date.diagnosis.80"),sep="/")
df295<-separate(df294,otherICD1081,into=c("other.ICD10.81","other.ICD10.date.diagnosis.81"),sep="/")
df296<-separate(df295,otherICD1082,into=c("other.ICD10.82","other.ICD10.date.diagnosis.82"),sep="/")
df297<-separate(df296,otherICD1083,into=c("other.ICD10.83","other.ICD10.date.diagnosis.83"),sep="/")
df298<-separate(df297,otherICD1084,into=c("other.ICD10.84","other.ICD10.date.diagnosis.84"),sep="/")
df299<-separate(df298,otherICD1085,into=c("other.ICD10.85","other.ICD10.date.diagnosis.85"),sep="/")
df300<-separate(df299,otherICD1086,into=c("other.ICD10.86","other.ICD10.date.diagnosis.86"),sep="/")
df301<-separate(df300,otherICD1087,into=c("other.ICD10.87","other.ICD10.date.diagnosis.87"),sep="/")
df302<-separate(df301,otherICD1088,into=c("other.ICD10.88","other.ICD10.date.diagnosis.88"),sep="/")
df303<-separate(df302,otherICD1089,into=c("other.ICD10.89","other.ICD10.date.diagnosis.89"),sep="/")
df304<-separate(df303,otherICD1090,into=c("other.ICD10.90","other.ICD10.date.diagnosis.90"),sep="/")
df305<-separate(df304,otherICD1091,into=c("other.ICD10.91","other.ICD10.date.diagnosis.91"),sep="/")
df306<-separate(df305,otherICD1092,into=c("other.ICD10.92","other.ICD10.date.diagnosis.92"),sep="/")
df307<-separate(df306,otherICD1093,into=c("other.ICD10.93","other.ICD10.date.diagnosis.93"),sep="/")
df308<-separate(df307,otherICD1094,into=c("other.ICD10.94","other.ICD10.date.diagnosis.94"),sep="/")
df309<-separate(df308,otherICD1095,into=c("other.ICD10.95","other.ICD10.date.diagnosis.95"),sep="/")
df310<-separate(df309,otherICD1096,into=c("other.ICD10.96","other.ICD10.date.diagnosis.96"),sep="/")
df311<-separate(df310,otherICD1097,into=c("other.ICD10.97","other.ICD10.date.diagnosis.97"),sep="/")
df312<-separate(df311,otherICD1098,into=c("other.ICD10.98","other.ICD10.date.diagnosis.98"),sep="/")
df313<-separate(df312,otherICD1099,into=c("other.ICD10.99","other.ICD10.date.diagnosis.99"),sep="/")
df314<-separate(df313,otherICD10100,into=c("other.ICD10.100","other.ICD10.date.diagnosis.100"),sep="/")
df315<-separate(df314,otherICD10101,into=c("other.ICD10.101","other.ICD10.date.diagnosis.101"),sep="/")
df316<-separate(df315,otherICD10102,into=c("other.ICD10.102","other.ICD10.date.diagnosis.102"),sep="/")
df317<-separate(df316,otherICD10103,into=c("other.ICD10.103","other.ICD10.date.diagnosis.103"),sep="/")
df318<-separate(df317,otherICD10104,into=c("other.ICD10.104","other.ICD10.date.diagnosis.104"),sep="/")
df319<-separate(df318,otherICD10105,into=c("other.ICD10.105","other.ICD10.date.diagnosis.105"),sep="/")
df320<-separate(df319,otherICD10106,into=c("other.ICD10.106","other.ICD10.date.diagnosis.106"),sep="/")
df321<-separate(df320,otherICD10107,into=c("other.ICD10.107","other.ICD10.date.diagnosis.107"),sep="/")
df322<-separate(df321,otherICD10108,into=c("other.ICD10.108","other.ICD10.date.diagnosis.108"),sep="/")
df323<-separate(df322,otherICD10109,into=c("other.ICD10.109","other.ICD10.date.diagnosis.109"),sep="/")
df324<-separate(df323,otherICD10110,into=c("other.ICD10.110","other.ICD10.date.diagnosis.110"),sep="/")
df325<-separate(df324,otherICD10111,into=c("other.ICD10.111","other.ICD10.date.diagnosis.111"),sep="/")
df326<-separate(df325,otherICD10112,into=c("other.ICD10.112","other.ICD10.date.diagnosis.112"),sep="/")
df327<-separate(df326,otherICD10113,into=c("other.ICD10.113","other.ICD10.date.diagnosis.113"),sep="/")
df328<-separate(df327,otherICD10114,into=c("other.ICD10.114","other.ICD10.date.diagnosis.114"),sep="/")
df329<-separate(df328,otherICD10115,into=c("other.ICD10.115","other.ICD10.date.diagnosis.115"),sep="/")
df330<-separate(df329,otherICD10116,into=c("other.ICD10.116","other.ICD10.date.diagnosis.116"),sep="/")
df331<-separate(df330,otherICD10117,into=c("other.ICD10.117","other.ICD10.date.diagnosis.117"),sep="/")
df332<-separate(df331,otherICD10118,into=c("other.ICD10.118","other.ICD10.date.diagnosis.118"),sep="/")
df333<-separate(df332,otherICD10119,into=c("other.ICD10.119","other.ICD10.date.diagnosis.119"),sep="/")
df334<-separate(df333,otherICD10120,into=c("other.ICD10.120","other.ICD10.date.diagnosis.120"),sep="/")
df335<-separate(df334,otherICD10121,into=c("other.ICD10.121","other.ICD10.date.diagnosis.121"),sep="/")
df336<-separate(df335,otherICD10122,into=c("other.ICD10.122","other.ICD10.date.diagnosis.122"),sep="/")
df337<-separate(df336,otherICD10123,into=c("other.ICD10.123","other.ICD10.date.diagnosis.123"),sep="/")
df338<-separate(df337,otherICD10124,into=c("other.ICD10.124","other.ICD10.date.diagnosis.124"),sep="/")
df339<-separate(df338,otherICD10125,into=c("other.ICD10.125","other.ICD10.date.diagnosis.125"),sep="/")
df340<-separate(df339,otherICD10126,into=c("other.ICD10.126","other.ICD10.date.diagnosis.126"),sep="/")
df341<-separate(df340,otherICD10127,into=c("other.ICD10.127","other.ICD10.date.diagnosis.127"),sep="/")
df342<-separate(df341,otherICD10128,into=c("other.ICD10.128","other.ICD10.date.diagnosis.128"),sep="/")
df343<-separate(df342,otherICD10129,into=c("other.ICD10.129","other.ICD10.date.diagnosis.129"),sep="/")
df344<-separate(df343,otherICD10130,into=c("other.ICD10.130","other.ICD10.date.diagnosis.130"),sep="/")
df345<-separate(df344,otherICD10131,into=c("other.ICD10.131","other.ICD10.date.diagnosis.131"),sep="/")
df346<-separate(df345,otherICD10132,into=c("other.ICD10.132","other.ICD10.date.diagnosis.132"),sep="/")
df347<-separate(df346,otherICD10133,into=c("other.ICD10.133","other.ICD10.date.diagnosis.133"),sep="/")
df348<-separate(df347,otherICD10134,into=c("other.ICD10.134","other.ICD10.date.diagnosis.134"),sep="/")
df349<-separate(df348,otherICD10135,into=c("other.ICD10.135","other.ICD10.date.diagnosis.135"),sep="/")
df350<-separate(df349,otherICD10136,into=c("other.ICD10.136","other.ICD10.date.diagnosis.136"),sep="/")
df351<-separate(df350,otherICD10137,into=c("other.ICD10.137","other.ICD10.date.diagnosis.137"),sep="/")
df352<-separate(df351,otherICD10138,into=c("other.ICD10.138","other.ICD10.date.diagnosis.138"),sep="/")
df353<-separate(df352,otherICD10139,into=c("other.ICD10.139","other.ICD10.date.diagnosis.139"),sep="/")
df354<-separate(df353,otherICD10140,into=c("other.ICD10.140","other.ICD10.date.diagnosis.140"),sep="/")
df355<-separate(df354,otherICD10141,into=c("other.ICD10.141","other.ICD10.date.diagnosis.141"),sep="/")
df356<-separate(df355,otherICD10142,into=c("other.ICD10.142","other.ICD10.date.diagnosis.142"),sep="/")
df357<-separate(df356,otherICD10143,into=c("other.ICD10.143","other.ICD10.date.diagnosis.143"),sep="/")
df358<-separate(df357,otherICD10144,into=c("other.ICD10.144","other.ICD10.date.diagnosis.144"),sep="/")
df359<-separate(df358,otherICD10145,into=c("other.ICD10.145","other.ICD10.date.diagnosis.145"),sep="/")
df360<-separate(df359,otherICD10146,into=c("other.ICD10.146","other.ICD10.date.diagnosis.146"),sep="/")
df361<-separate(df360,otherICD10147,into=c("other.ICD10.147","other.ICD10.date.diagnosis.147"),sep="/")
df362<-separate(df361,otherICD10148,into=c("other.ICD10.148","other.ICD10.date.diagnosis.148"),sep="/")
df363<-separate(df362,otherICD10149,into=c("other.ICD10.149","other.ICD10.date.diagnosis.149"),sep="/")
df364<-separate(df363,otherICD10150,into=c("other.ICD10.150","other.ICD10.date.diagnosis.150"),sep="/")
df365<-separate(df364,otherICD10151,into=c("other.ICD10.151","other.ICD10.date.diagnosis.151"),sep="/")
df366<-separate(df365,otherICD10152,into=c("other.ICD10.152","other.ICD10.date.diagnosis.152"),sep="/")
df367<-separate(df366,otherICD10153,into=c("other.ICD10.153","other.ICD10.date.diagnosis.153"),sep="/")
df368<-separate(df367,otherICD10154,into=c("other.ICD10.154","other.ICD10.date.diagnosis.154"),sep="/")
df369<-separate(df368,otherICD10155,into=c("other.ICD10.155","other.ICD10.date.diagnosis.155"),sep="/")
df370<-separate(df369,otherICD10156,into=c("other.ICD10.156","other.ICD10.date.diagnosis.156"),sep="/")
df371<-separate(df370,otherICD10157,into=c("other.ICD10.157","other.ICD10.date.diagnosis.157"),sep="/")
df372<-separate(df371,otherICD10158,into=c("other.ICD10.158","other.ICD10.date.diagnosis.158"),sep="/")
df373<-separate(df372,otherICD10159,into=c("other.ICD10.159","other.ICD10.date.diagnosis.159"),sep="/")
df374<-separate(df373,otherICD10160,into=c("other.ICD10.160","other.ICD10.date.diagnosis.160"),sep="/")
df375<-separate(df374,otherICD10161,into=c("other.ICD10.161","other.ICD10.date.diagnosis.161"),sep="/")
df376<-separate(df375,otherICD10162,into=c("other.ICD10.162","other.ICD10.date.diagnosis.162"),sep="/")
df377<-separate(df376,otherICD10163,into=c("other.ICD10.163","other.ICD10.date.diagnosis.163"),sep="/")
df378<-separate(df377,otherICD10164,into=c("other.ICD10.164","other.ICD10.date.diagnosis.164"),sep="/")
df379<-separate(df378,otherICD10165,into=c("other.ICD10.165","other.ICD10.date.diagnosis.165"),sep="/")
df380<-separate(df379,otherICD10166,into=c("other.ICD10.166","other.ICD10.date.diagnosis.166"),sep="/")
df381<-separate(df380,otherICD10167,into=c("other.ICD10.167","other.ICD10.date.diagnosis.167"),sep="/")
df382<-separate(df381,otherICD10168,into=c("other.ICD10.168","other.ICD10.date.diagnosis.168"),sep="/")
df383<-separate(df382,otherICD10169,into=c("other.ICD10.169","other.ICD10.date.diagnosis.169"),sep="/")
df384<-separate(df383,otherICD10170,into=c("other.ICD10.170","other.ICD10.date.diagnosis.170"),sep="/")
df385<-separate(df384,otherICD10171,into=c("other.ICD10.171","other.ICD10.date.diagnosis.171"),sep="/")
df386<-separate(df385,otherICD10172,into=c("other.ICD10.172","other.ICD10.date.diagnosis.172"),sep="/")
df387<-separate(df386,otherICD10173,into=c("other.ICD10.173","other.ICD10.date.diagnosis.173"),sep="/")
df388<-separate(df387,otherICD10174,into=c("other.ICD10.174","other.ICD10.date.diagnosis.174"),sep="/")
df389<-separate(df388,otherICD10175,into=c("other.ICD10.175","other.ICD10.date.diagnosis.175"),sep="/")
df390<-separate(df389,otherICD10176,into=c("other.ICD10.176","other.ICD10.date.diagnosis.176"),sep="/")
df391<-separate(df390,otherICD10177,into=c("other.ICD10.177","other.ICD10.date.diagnosis.177"),sep="/")
df392<-separate(df391,otherICD10178,into=c("other.ICD10.178","other.ICD10.date.diagnosis.178"),sep="/")
df393<-separate(df392,otherICD10179,into=c("other.ICD10.179","other.ICD10.date.diagnosis.179"),sep="/")
df394<-separate(df393,otherICD10180,into=c("other.ICD10.180","other.ICD10.date.diagnosis.180"),sep="/")
df395<-separate(df394,otherICD10181,into=c("other.ICD10.181","other.ICD10.date.diagnosis.181"),sep="/")
df396<-separate(df395,otherICD10182,into=c("other.ICD10.182","other.ICD10.date.diagnosis.182"),sep="/")
df397<-separate(df396,otherICD10183,into=c("other.ICD10.183","other.ICD10.date.diagnosis.183"),sep="/")
df398<-separate(df397,otherICD10184,into=c("other.ICD10.184","other.ICD10.date.diagnosis.184"),sep="/")
df399<-separate(df398,otherICD10185,into=c("other.ICD10.185","other.ICD10.date.diagnosis.185"),sep="/")
df400<-separate(df399,otherICD10186,into=c("other.ICD10.186","other.ICD10.date.diagnosis.186"),sep="/")
df401<-separate(df400,otherICD10187,into=c("other.ICD10.187","other.ICD10.date.diagnosis.187"),sep="/")
df402<-separate(df401,otherICD10188,into=c("other.ICD10.188","other.ICD10.date.diagnosis.188"),sep="/")
df403<-separate(df402,otherICD10189,into=c("other.ICD10.189","other.ICD10.date.diagnosis.189"),sep="/")
df404<-separate(df403,otherICD10190,into=c("other.ICD10.190","other.ICD10.date.diagnosis.190"),sep="/")
df405<-separate(df404,otherICD10191,into=c("other.ICD10.191","other.ICD10.date.diagnosis.191"),sep="/")
df406<-separate(df405,otherICD10192,into=c("other.ICD10.192","other.ICD10.date.diagnosis.192"),sep="/")
df407<-separate(df406,otherICD10193,into=c("other.ICD10.193","other.ICD10.date.diagnosis.193"),sep="/")
df408<-separate(df407,otherICD10194,into=c("other.ICD10.194","other.ICD10.date.diagnosis.194"),sep="/")
df409<-separate(df408,otherICD10195,into=c("other.ICD10.195","other.ICD10.date.diagnosis.195"),sep="/")
df410<-separate(df409,otherICD10196,into=c("other.ICD10.196","other.ICD10.date.diagnosis.196"),sep="/")
df411<-separate(df410,otherICD10197,into=c("other.ICD10.197","other.ICD10.date.diagnosis.197"),sep="/")
df412<-separate(df411,otherICD10198,into=c("other.ICD10.198","other.ICD10.date.diagnosis.198"),sep="/")
df413<-separate(df412,otherICD10199,into=c("other.ICD10.199","other.ICD10.date.diagnosis.199"),sep="/")
df414<-separate(df413,otherICD10200,into=c("other.ICD10.200","other.ICD10.date.diagnosis.200"),sep="/")
df415<-separate(df414,otherICD10201,into=c("other.ICD10.201","other.ICD10.date.diagnosis.201"),sep="/")
df416<-separate(df415,otherICD10202,into=c("other.ICD10.202","other.ICD10.date.diagnosis.202"),sep="/")
df417<-separate(df416,otherICD10203,into=c("other.ICD10.203","other.ICD10.date.diagnosis.203"),sep="/")
df418<-separate(df417,otherICD10204,into=c("other.ICD10.204","other.ICD10.date.diagnosis.204"),sep="/")
df419<-separate(df418,otherICD10205,into=c("other.ICD10.205","other.ICD10.date.diagnosis.205"),sep="/")
df420<-separate(df419,otherICD10206,into=c("other.ICD10.206","other.ICD10.date.diagnosis.206"),sep="/")
df421<-separate(df420,otherICD10207,into=c("other.ICD10.207","other.ICD10.date.diagnosis.207"),sep="/")
df422<-separate(df421,otherICD10208,into=c("other.ICD10.208","other.ICD10.date.diagnosis.208"),sep="/")
df423<-separate(df422,otherICD10209,into=c("other.ICD10.209","other.ICD10.date.diagnosis.209"),sep="/")
df424<-separate(df423,otherICD10210,into=c("other.ICD10.210","other.ICD10.date.diagnosis.210"),sep="/")
df425<-separate(df424,otherICD10211,into=c("other.ICD10.211","other.ICD10.date.diagnosis.211"),sep="/")
df426<-separate(df425,otherICD10212,into=c("other.ICD10.212","other.ICD10.date.diagnosis.212"),sep="/")
df_split<-separate(df426,otherICD10213,into=c("other.ICD10.213","other.ICD10.date.diagnosis.213"),sep="/")

str(df, list.len=ncol(df))
str(df_split, list.len=ncol(df_split))

#Perform step 2 
df_split$PLTinitialdates <- as.Date(df_split$PLT_dates_initial)
#OR
df_split$MPVinitialdates <- as.Date(df_split$MPVdates_initial)

date <- grepl("date", names(df_split))
df_split[,date] <-lapply(df_split[, date, drop=FALSE], as.Date)

#Step 3
df_split <- df_split %>% mutate(earliest_date = pmin(thrombotic.events.ICD10.date.diagnosis.1, na.rm =T))
df_split$PLTincident.flag <- ifelse(df_split$earliest_date >= df_split$PLTinitialdates,1,0) 
table(df_split$PLTincident.flag)

#OR
df_split$MPVincident.flag <- ifelse(df_split$earliest_date >= df_split$MPVinitialdates,1,0) 
table(df_split$MPVincident.flag)

#Step 4 - Participants who have a ICD10 of interest code diagnosed after PLT initial measurement date
# define incident cases (2=cases)
df_split$cases <- ifelse(df_split$PLTincident.flag ==1, 2, 0) # cases
#OR
df_split$cases <- ifelse(df_split$MPVincident.flag ==1, 2, 0) # cases
table(df_split$cases)
#Make incident thrombotic outcome
df_split$incident_thrombotic_events <- NA
df_split$incident_thrombotic_events <- ifelse(df_split$cases==2, 2, NA)
table(df_split$incident_thrombotic_events)

#Step 5 
res_final <- df_split[,c("projectID", "ieu", "PLT_initial_SD", "incident_thrombotic_events")]
write.table(res_final, "UKB_PLT_initial_SD_ICD10_outcome", sep = " ", col.names=T,row.names=F,quote=F)
#OR
res_final <- df_split[,c("projectID", "ieu", "MPV_initial_SD","incident_thrombotic_events")]
write.table(res_final, "UKB_MPV_initial_SD_ICD10_outcome", sep = " ", col.names=T,row.names=F,quote=F)
